<!doctype html>
<html ng-app="filesync">
    <head>
        <title>Socket.IO</title>
        <link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap.css"/>
        <link rel="stylesheet" href="/components/bootstrap/dist/css/bootstrap-theme.css"/>
        <link rel="stylesheet" href="/components/highlightjs/styles/dark.css"/>
        <link rel="stylesheet" href="/css/style.css"/>
        <base href="/">
    </head>
    <body>
        <div class="container-fluid col-xs-9 history" id="history" ng-controller="historyController as hC">
            <button type="button" class="btn btn-info btn-xs btn-toogle col-xs-offset-11" id="btnHide">Hide Chat</button>
            <div class="row-fluid">
                <h4 class="col-xs-12">File History
                    {{ hC.visibility.states }}</h4>
                <notify-error></notify-error>
            </div>
            <!-- /row -->
            <div class="row-fluid">
                <div ng-repeat="edit in hC.edits" class="animate">
                    <div class="line well ng-cloak">
                        <div class="row">
                            <div class="cell col-xs-2">
                                {{ edit.timestamp | date : 'medium' }}
                            </div>
                            <div class="cell col-xs-9 filename">
                                {{ edit.filename }}
                            </div>
                            <div class="cell col-xs-1 options">
                                <a href ng-click="hC.remove(edit)" class="glyphicon glyphicon-remove" title=""></a>
                            </div>
                            <div class="col-xs-12">
                                <div hljs source="edit.content">
                                    <textarea></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!-- /line -->
                </div>
                <div class="col-xs-12 alert alert-info" ng-if="hC.edits.length === 0" class="animate">
                    ... aucun historique... mais que fait le prof !
                </div>
            </div>
        </div>
        <!-- /container history-->
        <div id="chat" class="container-fluid col-xs-3 chat">
            <div class="chatTitle">
                <h4>Chat Filesync</h4>
                <hr>
            </div>
            <div class="messages" id="chatMessages" ng-controller="messagesController as mC">
                <div ng-repeat="message in mC.messages track by $index" class="animate test">
                    <div class="message">
                        {{ message.time }}
                        <span style="color: {{ message.viewer.color }}" class="nick">{{ message.viewer.nickname }}</span>:
                        {{ message.message }}
                    </div>
                </div>
            </div>
            <div class="sendMessage" ng-controller="inputController as iC">
                <hr>
                <div class="input">
                    <form ng-submit="iC.sendMessage()">
                        <input type="text" ng-model="iC.message" class="form-control inputChat" id="inputChat" placeholder="Envoyer un message"/>
                    </form>
                </div>
                <div class="controlsInput">
                    <span id="controlInputColor" class="glyphicon glyphicon-pencil controlInput" aria-hidden="true"></span>
                </div>
            </div>
        </div>
        <!-- /container chat-->
        <div id="containerColor" class="controlColor hidden" ng-controller="viewersController as vC">
            <div class="choixCouleur">
                CHOIX DE COULEUR !
            </div>
            <hr>
            <div ng-repeat="color in vC.colors track by $index" class="colors">
                <div ng-if="vC.color == color" ng-click="vC.updateColor();vC.color=color" class="glyphicon glyphicon-stop color used" aria-hidden="true" style="color: {{ color }}" id="{{ color }}"></div>
                <div ng-if="vC.color != color" ng-click="vC.updateColor();vC.color=color" class="glyphicon glyphicon-stop color" aria-hidden="true" style="color: {{ color }}" id="{{ color }}"></div>
            </div>
        </div>

        <script src="/socket.io/socket.io.js" type="text/javascript"></script>
        <!-- inject:js -->
        <script src="/scripts/bower.js"></script>
        <!-- endinject -->
        <script src="/scripts/app.min.js"></script>
    </body>

</html>
